#!/bin/bash
# Wrap `tig` to use .homegit.

main() {
    DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
    . "$DIR"/git _source

    tig="$(set_aside_this_and_find_that "$DIR" tig)"

    if [ -z "$tig" ]; then
        # No `tig`; fallback to `git log`.
        local tiglike="%C(blue)%ad %C(green)%<(19)%an%C(auto)%h%d %C(reset)%s"
        git log --pretty=format:"$tiglike" --date=format:"%Y-%m-%d %H:%M"
        return
    fi

    if use_homegit; then
        export GIT_DIR=$HOME/.homegit
    fi

    exec "$tig" "$@"
}

main "$@"
