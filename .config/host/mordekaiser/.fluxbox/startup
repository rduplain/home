# fluxbox startup file
#
# By this point, X has called startfluxbox.
# The goal of this file is to:
#    * set a custom fluxbox environment
#    * start apps before starting fluxbox
#    * start fluxbox

# Use custom built fluxbox.
export PATH=/opt/fluxbox/bin:$HOME/bin:$PATH

# Set a solid black background.
fbsetroot -solid black

# Set GNOME's background.
bash <<EOF &
gsettings set org.gnome.desktop.background color-shading-type solid
gsettings set org.gnome.desktop.background picture-options zoom
gsettings set org.gnome.desktop.background picture-uri 'file:///usr/share/backgrounds/mordekaiser.jpg'
gsettings set org.gnome.desktop.background primary-color '#333333'
gsettings set org.gnome.desktop.background picture-options zoom
sleep 2
gsettings set org.gnome.desktop.background color-shading-type solid
gsettings set org.gnome.desktop.background picture-options none
gsettings set org.gnome.desktop.background picture-uri ''
gsettings set org.gnome.desktop.background primary-color '#000000000000'
EOF

gnome-settings-daemon &
parcellite &
xscreensaver -no-splash &
nm-applet &
thunar --daemon &
gnome-sound-applet &
dropbox start &
bash -c 'sleep 10; exec gnome-do' &
bash -c 'sleep 300; killall update-notifier' &
xterm -e start-mordekaiser &
xscreensaver-watch &

# Turn off beeps.
xset -b

# Set the keyboard rate.
xset r rate 250 30

notice `uname -n` fluxbox is starting
trap 'notice `uname -n` fluxbox is stopping' 0 INT TERM QUIT EXIT

# Print traps to stdio for X log.
trap

fluxbox
