# fluxbox startup file
#
# By this point, X has called startfluxbox.
# The goal of this file is to:
#    * set a custom fluxbox environment
#    * start apps before starting fluxbox
#    * start fluxbox

# Set a solid black background.
fbsetroot -solid black

if [ -f $HOME/.Xresources ]; then
    xrdb -merge $HOME/.Xresources
fi

parcellite &
xscreensaver -no-splash &
nm-applet &
thunar --daemon &
pnmixer &
dropbox start &
bash -c 'sleep 10; exec gnome-do' &
bash -c 'sleep 10; killall update-notifier' &
bash -c 'sleep 300; killall update-notifier' &
xscreensaver-watch &

# Turn off beeps.
xset -b

# Set the keyboard rate.
xset r rate 250 30

if [ -z "$SSH_AUTH_SOCK" ] && [ -e $HOME/.ssh/agent.bash ]; then
    . $HOME/.ssh/agent.bash
else
    echo-ssh-agent > $HOME/.ssh/agent.bash
fi

notice `uname -n` fluxbox is starting
trap 'notice `uname -n` fluxbox is stopping' 0 INT TERM QUIT EXIT

screens &

# Print traps to stdio for X log.
trap

/opt/fluxbox/bin/fluxbox
